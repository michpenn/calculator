<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"
          integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ=="
          crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"
          integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"
            integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ=="
            crossorigin="anonymous"></script>
    <link type="text/css" href="style.css" rel="stylesheet">
    <script src="http://Learning-Fuze.github.io/calculator/calculator.js"></script>
    <script>
        var justclicked;
        var firstclick;
        var secondclick;
        var output_array = [];

        $(document).ready(function () {
            $('button').click(function () {
                justclicked = this.outerText;
                buttonClicked();
            });

        });

        function buttonClicked() {
            console.log('justclicked = ', justclicked);
            if (typeof firstclick == 'undefined') {
                firstclick = justclicked;
            }
            else {
                secondclick = justclicked;
            }
            if (typeof firstclick == 'string' && typeof secondclick == 'string') {
                console.log('firstclick parseint = ', parseInt(firstclick), ' secondclick parseint = ', parseInt(secondclick));
                if (Math.abs(parseInt(firstclick)) >= 0 && Math.abs(parseInt(secondclick)) >= 0) {
                    firstclick = parseInt(firstclick);
                    secondclick = parseInt(secondclick);
                    firstclick = firstclick + '' + secondclick;
                    secondclick = '';
                }
                else {
                    console.log('a non number was clicked');
                    var firstnumber = new output_number(firstclick, typeof firstclick);
                    output_array.push(firstnumber);
                    switch (secondclick) {
                        case '+':
                            evaluate();
                            var addition = new output_operator(secondclick, typeof secondclick);
                            output_array.push(addition);
                            console.log(output_array);
                            firstclick = undefined;
                            secondclick = undefined;
                            break;
                        case '-':
                            evaluate();
                            var subtraction = new output_operator(secondclick, typeof secondclick);
                            output_array.push(subtraction);
                            console.log(output_array);
                            firstclick = undefined;
                            secondclick = undefined;
                            break;
                        case 'x':
                            evaluate();
                            var multiplication = new output_operator('*', typeof secondclick);
                            output_array.push(multiplication);
                            console.log(output_array);
                            firstclick = undefined;
                            secondclick = undefined;
                            break;
                        case '/':
                            evaluate();
                            var division = new output_operator(secondclick, typeof secondclick);
                            output_array.push(division);
                            console.log(output_array);
                            firstclick = undefined;
                            secondclick = undefined;
                            break;
                        case '=':
                            evaluate();
                            break;
                        case 'AC':
                            output_array = [];
                            console.log(output_array);
                            break;
                        /*case 'C':
                         console.log('is clear working');
                         output_array.pop();
                         console.log(output_array);
                         break;*/

                    }
                }
            }

        }

        function output_number(value, type) {
            this.value = value;
            this.type = type;
        }

        function output_operator(value, type) {
            this.value = value;
            this.type = type;
        }

        function evaluate() {
            var evaluation = '';
            for (var i = 0; i < output_array.length; i++) {
                console.log(output_array[i].value);
                if (Math.abs(parseInt(output_array[i].value)) >= 0) {
                    evaluation += parseInt(output_array[i].value);
                }
                else {
                    evaluation += output_array[i].value;
                }
            }
            console.log(evaluation);
            evaluation = (eval(evaluation));
            var evaluated = new output_number(evaluation, typeof evaluation);
            console.log(evaluated);
            output_array.splice(0, 3, evaluated);
            console.log(output_array);
        }

        function clearthis() {
            console.log('is clear working');
            output_array.pop();
            console.log(output_array);
        }


        function callback(type, value, item) {
            console.log('type: ', type, ' value: ', value, ' item: ', item);
            switch (value) {
                case undefined:
                    $('#display_area').html('');
                    break;
                default:
                    $('#display_area').html(value);
                    break;
            }
        }

        var my_calculator = new calculator(callback);

        $(document).ready(function () {
            $('button').on('click', function () {
                var val = $(this).text();
                switch (val) {
                    case 'AC':
                        my_calculator.allClear();
                        break;
                    case 'C':
                        my_calculator.clear();
                        break;
                    default:
                        my_calculator.addItem($(this).text());
                        break;
                }
                console.log(val, my_calculator);
            });
        })

    </script>
</head>
<body>
<div class="container calculator">
    <div class="row">
        <div class="col-md-12 the_display" id="display_area">
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-12 center_buttons_container">
                    <div class="row top">
                        <div class="col-md-3">
                            <button type="button" class="btn btn-default clear" onclick="clearthis()">C</button>
                        </div>
                        <div class="col-md-3">
                            <button type="button" class="btn btn-default clear">AC</button>
                        </div>
                        <div class="col-md-4">
                            <button type="button" class="btn btn-default btn-block operator">+</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <button type="button" class="btn btn-default">7</button>
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-default">8</button>
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-default">9</button>
                        </div>
                        <div class="col-md-4">
                            <button type="button" class="btn btn-default btn-block operator">-</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <button type="button" class="btn btn-default">4</button>
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-default">5</button>
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-default">6</button>
                        </div>
                        <div class="col-md-4">
                            <button type="button" class="btn btn-default btn-block operator">x</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <button type="button" class="btn btn-default">1</button>
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-default">2</button>
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-default">3</button>
                        </div>
                        <div class="col-md-4">
                            <button type="button" class="btn btn-default btn-block operator">/</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <button type="button" class="btn btn-default">0</button>
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-default">.</button>
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-default equals">=</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>